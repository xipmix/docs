<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>UI Configuration Pages - Volumio Documentation</title>
    <meta name="description" content="The Audiophile Music Player" />
    <meta name="author" content="Michelangelo Guarise">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/volumiodocs.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="brand navbar-brand pull-left" href="../index.html">Volumio Documentation</a>

    <div class="navbar-right navbar-form search">
        <i class="glyphicon glyphicon-search search__icon">&nbsp;</i>
        <input type="search" id="tipue_search_input" class="form-control search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>User Manual</a><ul class='nav nav-list'><li class=''><a href="../User_Manual/Quick_Start_Guide.html">Quick Start Guide</a></li><li class=''><a href="../User_Manual/System_updates.html">System updates</a></li><li class=''><a href="../User_Manual/Volume_Control_and_audio_quality.html">Volume Control and audio quality</a></li><li class=''><a href="../User_Manual/Configure_MPD_Clients_for_albumart.html">Configure MPD Clients for albumart</a></li><li class=''><a href="../User_Manual/Sending_logs_for_troubleshooting.html">Sending logs for troubleshooting</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Development How To</a><ul class='nav nav-list'><li class=''><a href="../Development_How_To/Overview.html">Overview</a></li><li class=''><a href="../Development_How_To/System_Architecture.html">System Architecture</a></li><li class=''><a href="../Development_How_To/Set_up_a_development_environment.html">Set up a development environment</a></li><li class=''><a href="../Development_How_To/Debugging.html">Debugging</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>API</a><ul class='nav nav-list'><li class=''><a href="../API/API_Overview.html">API Overview</a></li><li class=''><a href="../API/WebSocket_APIs.html">WebSocket APIs</a></li><li class=''><a href="../API/UI_Configuration_Pages.html">UI Configuration Pages</a></li><li class=''><a href="../API/REST_API.html">REST API</a></li></ul></li><li class='open has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Plugin System</a><ul class='nav nav-list'><li class=''><a href="../Plugin_System/Plugin_System_Overview.html">Plugin System Overview</a></li><li class=''><a href="../Plugin_System/Writing_A_Plugin.html">Writing A Plugin</a></li><li class=''><a href="../Plugin_System/Index.js.html">Index.js</a></li><li class='active'><a href="../Plugin_System/UI_Configuration_Pages.html">UI Configuration Pages</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>I2S DACs</a><ul class='nav nav-list'><li class=''><a href="../I2S_DACs/Adding_Compatibility_to_your_DAC.html">Adding Compatibility to your DAC</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Good to Knows</a><ul class='nav nav-list'><li class=''><a href="../Good_to_Knows/Markdown_Cheatsheet.html">Markdown Cheatsheet</a></li><li class=''><a href="../Good_to_Knows/Mounting_an_NFS_Share.html">Mounting an NFS Share</a></li><li class=''><a href="../Good_to_Knows/Contribute_to_this_Doc.html">Contribute to this Doc</a></li><li class=''><a href="../Good_to_Knows/Connection_Outside_LAN.html">Connection Outside LAN</a></li><li class=''><a href="../Good_to_Knows/Command_Line_Client.html">Command Line Client</a></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="https://volumio.org" target="_blank">Home</a><br><a href="https://volumio.org/get-started" target="_blank">Download</a><br><a href="https://volumio.org/forum" target="_blank">Forum</a><br><a href="https://gitter.im/volumio/Volumio2?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge" target="_blank">Live Chat</a><br><a href="https://github.com/volumio" target="_blank">GitHub Repo</a><br><a href="https://volumio.github.io/docs/Good_to_Knows/Contribute_to_this_Doc.html" target="_blank">Improve this documentation</a><br>
                        <div id="toggleCodeBlock">
                                                    <a id="toggleCodeBlockBtn" href="#" onclick="toggleCodeBlocks();">Show Code Blocks Inline</a><br>
                                                </div>

                        <!-- Twitter -->
                                                    <div class="twitter">
                                <hr/>
                                <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=volumio&amp;show_count=false"></iframe>
                            </div>
                        
                        <hr/>
                    
                </div>
            </div>
        </div>
        <div class="right-column  content-area col-sm-9">

            <div class="content-page">
                                    <div id="tipue_search_content" style="display:none"></div>
                
                <div class="doc_content">
                    <article>
            <div class="page-header">
            <h1>UI Configuration Pages</h1>
        </div>
    
    <h2 id="page_The_Configuration_Pages">The Configuration Pages</h2>
<p>To allow an easy development of plugin, we need a structured but still flexible way to configure plugins. Volumio uses a json based markup languages to describe the visual and functional aspects of configuration pages. This supports multilanguage and should be flexible enough to allow any kind of setting to be modified. If you feel your case is not covered, feel free to open an issue or discussion at</p>
<p><a href="https://github.com/volumio/Volumio2/">https://github.com/volumio/Volumio2/</a></p>
<h2 id="page_Introduction">Introduction</h2>
<p>Configurations resides on single .json files, pertaining to a core component or a specific plugin. This file is <code>UIConfig.json</code> and it's interpreted by the <code>getUIConfig</code> function present in every plugin. The very same system is used by both Volumio core plugins and community developed plugins, the only difference is that for core functions (such as Wi-fi browser, NAS Browser and some others) we developed special controllers in the UI. You can take a look at them in the  <a href="https://github.com/volumio/Volumio2-UI/tree/master/src/app/plugin/core-plugin">core elements part of Volumio2 UI</a> .</p>
<p>This the flow of events that results in the visualization of the configuration page:</p>
<ol>
<li>Click on cog wheel, this sends the message <code>getUiConfig</code> for the category and plugin name</li>
<li>CommandRouter forwards it to the Plugins</li>
<li>The Plugin executes the <code>getUIConfig</code> function which parses and handles the <code>UIConfig.json</code> file</li>
<li>Once this is done, it returns the full config, which is a json based object.</li>
<li>UI parses it and visualizes it</li>
<li>Upon saving, data is sent back as an object</li>
</ol>
<h3 id="page_The_UIConfigjson_file">The UIConfig.json file</h3>
<p>It's the json file which describes visually and functionally the configuration page. A very simple example is spotify's plugin config file:</p>
<pre><code class="language-json">{
  &quot;page&quot;: {
    &quot;label&quot;: &quot;Spotify Configuration&quot;
  },
  &quot;sections&quot;: [
   {
      &quot;id&quot;: &quot;section_account&quot;,
      &quot;element&quot;: &quot;section&quot;,
      &quot;label&quot;: &quot;Spotify account&quot;,
      &quot;icon&quot;: &quot;fa-plug&quot;,
      &quot;onSave&quot;: {&quot;type&quot;:&quot;controller&quot;, &quot;endpoint&quot;:&quot;music_service/spop&quot;, &quot;method&quot;:&quot;saveSpotifyAccount&quot;},
      &quot;saveButton&quot;: {
        &quot;label&quot;: &quot;Save&quot;,
        &quot;data&quot;: [
          &quot;username&quot;,
          &quot;password&quot;,
          &quot;bitrate&quot;
        ]
      },
      &quot;content&quot;: [
        {
          &quot;id&quot;: &quot;username&quot;,
          &quot;type&quot;:&quot;text&quot;,
          &quot;element&quot;: &quot;input&quot;,
          &quot;doc&quot;: &quot;This is the username of your Spotify account&quot;,
          &quot;label&quot;: &quot;Username&quot;,
          &quot;value&quot;: &quot;&quot;
        },
        {
          &quot;id&quot;: &quot;password&quot;,
          &quot;type&quot;:&quot;password&quot;,
          &quot;element&quot;: &quot;input&quot;,
          &quot;doc&quot;: &quot;This is the password of your Spotify account&quot;,
          &quot;label&quot;: &quot;Password&quot;,
          &quot;value&quot;: &quot;&quot;
        },
        {
          &quot;id&quot;:&quot;bitrate&quot;,
          &quot;element&quot;: &quot;switch&quot;,
          &quot;doc&quot;: &quot;High bitrate&quot;,
          &quot;label&quot;: &quot;Set for high bitrate&quot;,
          &quot;value&quot;: true
        }
      ]
   }
  ]
}

</code></pre>
<p>Let's break it down and analyze in its sections:</p>
<pre><code class="language-json">  &quot;page&quot;: {
    &quot;label&quot;: &quot;Spotify Configuration&quot;
  }
</code></pre>
<p>This is the Page's tite.</p>
<pre><code>&quot;sections&quot;: [
 {
    &quot;id&quot;: &quot;section_account&quot;,
    &quot;element&quot;: &quot;section&quot;,
    &quot;label&quot;: &quot;Spotify account&quot;,
    &quot;icon&quot;: &quot;fa-plug&quot;,
    &quot;onSave&quot;: {&quot;type&quot;:&quot;controller&quot;, &quot;endpoint&quot;:&quot;music_service/spop&quot;, &quot;method&quot;:&quot;saveSpotifyAccount&quot;},
    &quot;saveButton&quot;: {
      &quot;label&quot;: &quot;Save&quot;,
      &quot;data&quot;: [
        &quot;username&quot;,
        &quot;password&quot;,
        &quot;bitrate&quot;
      ]
    }
</code></pre>
<p>Those are the sections descriptors. A section is typically a block of options which are related one to each other. Each section has:</p>
<ul>
<li>id : used to identify it</li>
<li>element: the type, which is of course section</li>
<li>label: the title of the section</li>
<li>icon: the icon showed, it's a  <a href="http://fontawesome.io/icons/">font-awesome icon</a>
</li>
<li>onSave: it's the function invoked in the plugin index.js file, the payload will be a json object (see saveButton data item)</li>
<li>saveButton label : pretty self-explanatory</li>
<li>saveButton data : this will be the payload sent along, taking data from the elements into the array. In the case above the payload will be {&quot;username&quot;:usernameset,&quot;password&quot;:passwordset,&quot;bitrate&quot;:bitratedata}</li>
</ul>
<pre><code>&quot;content&quot;: [
  {
    &quot;id&quot;: &quot;username&quot;,
    &quot;type&quot;:&quot;text&quot;,
    &quot;element&quot;: &quot;input&quot;,
    &quot;doc&quot;: &quot;This is the username of your Spotify account&quot;,
    &quot;label&quot;: &quot;Username&quot;,
    &quot;value&quot;: &quot;&quot;
  }
</code></pre>
<p>Content defines all the elements available in a section. It needs the following fields:</p>
<ul>
<li>id : the id, this one is the one referred in saveButton data</li>
<li>type : type of the element, for a comprehensive list of examples see later</li>
<li>doc : an explanation of what the field does</li>
<li>label: label</li>
<li>value: this is the current value of the element, can be manipulated in the <code>getUIConfig</code> function. It can be either a boolean (true | false), a string or a number.</li>
<li>Optionally, you can also require a confirmation popup by adding the entry <code>'askForConfirm': {'title': 'Confirm', 'message': 'Do you want to save this values?'}</code>
</li>
<li>If you want to hide or show an element dynamically based on the state on another option (in the same section), you can use <code>'visibleIf': {'field': 'spotify_service', 'value': true}</code>
</li>
</ul>
<h3 id="page_Element_Types">Element Types</h3>
<h4 id="page_Text_input">Text input</h4>
<pre><code>                'id': 'playerName',
                'element': 'input',
                'type': 'text',
                'label': 'Player Name',
                'attributes': [
                  {'placeholder': 'call me with a fancy name'}, {'maxlength': 10}
                ],
                'value': 'Volumio'
</code></pre>
<h4 id="page_switch">switch</h4>
<pre><code>               'id': 'airplay',
               'element': 'switch',
               'label': 'Airplay',
               'description': 'Apple airplay',
               'value': true             
</code></pre>
<h4 id="page_select">select</h4>
<pre><code>'id': 'kernel_profile',
               'element': 'select',
               'label': 'Kernel profile',
               'value': {'value': 2 ,'label': 'Less Jitter'},
               'options': [
                 {
                   'value': 1,
                   'label': 'Default'
                 },
                 {
                   'value': 2,
                   'label': 'Less Jitter'
                 },
                 {
                   'value': 3,
                   'label': 'Jitter'
                 },
                 {
                   'value': 4,
                   'label': 'Focus'
                 }
               ]
</code></pre>
<h4 id="page_button">button</h4>
<pre><code>'id': 'update',
              'element': 'button',
              'label': 'System updates',
              'description': 'You can check?...',
              'onClick': {
                'type': 'emit',
                'data': 'search-for-upgrade',
                'message': 'updateCheck',
                'askForConfirm': {'title': 'Confirm', 'message': 'are you sure?'}
</code></pre>
<h4 id="page_Equalizer">Equalizer</h4>
<pre><code>'id': 'eq',
'type': 'section',
'label': 'Equalizer',
'onSave': {
  'type': 'plugin',
  'endpoint': 'music_services/eq',
  'method': 'saveEqValues'
},
'saveButton': {
  'label': 'Save eq settings',
  'data': [
    'bandEqualizer', 'equalizerSelector'
  ]
},
'content': [
  {
    'id': 'eq_switch',
    'element': 'switch',
    'label': 'Test eq switch',
    'value': true
  },    
  {
   'id': 'bandEqualizer',
   'element': 'equalizer',
   'label': 'Music EQ',
   'description': 'Desc',
   'visibleIf': {'field': 'eq_switch', 'value': true},
   'config': {
     orientation: 'vertical',
     bars: [
       {
         min: -100,
         max: 100,
         step: 20,
         value: 20,
         tooltip: 'always'
       },
       {
         min: 0,
         max: 50,
         step: 20,
         value: 25,
         tooltip: 'hide'
       },
       {
         min: 0,
         max: 50,
         step: 20,
         value: 25,
         tooltip: 'always'
       }
     ]
   }
 }
</code></pre>
<h4 id="page_Equalizer_Selector">Equalizer Selector</h4>
<pre><code>{
             'id': 'equalizerSelector',
             'element': 'equalizer',
             'label': 'Slider selector',
             'description': 'Desc',
             'config': {
               orientation: 'horizontal',
               bars: [
                 {
                   min: 0,
                   max: 50,
                   step: 10,
                   value: [10, 20],
                   range: true,
                   tooltip: 'always'
                 },
                 {
                   ticks: [1, 2, 3],
                   ticksLabels: ['Min', 'Medium', 'Max'],
                   value: 2,
                   tooltip: 'show'
                 },
                 {
                   ticks: [1, 2, 3, 4, 5],
                   ticksPositions: [0, 20, 40, 80, 100],
                   ticksLabels: ['1', '2', '3', '4', '5'],
                   tickSnapBounds: 20,
                   value: 4,
                   tooltip: 'show'      
                 }
</code></pre>

        <nav>
        <ul class="pager">
            <li><a href="../Plugin_System/Index.js.html">Previous</a></li>            <li><a href="../I2S_DACs/Adding_Compatibility_to_your_DAC.html">Next</a></li>        </ul>
    </nav>
    </article>

                </div>
            </div>
        </div>
    </div>
</div>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46374275-1', '');
    ga('send', 'pageview');
</script>

    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch_set.js"></script>
        <script type="text/javascript" src="../tipuesearch/tipuesearch.min.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(document).ready(function() {
                $('#tipue_search_input').tipuesearch({
                    'show': 10,
                    'mode': 'json',
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
